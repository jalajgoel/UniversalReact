'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ERROR = exports.SIGNUP = undefined;
exports.handleSignUp = handleSignUp;
exports.handleSignupError = handleSignupError;
exports.fetchSignup = fetchSignup;

var _variables = require('../../variables');

var _variables2 = _interopRequireDefault(_variables);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

const SIGNUP = exports.SIGNUP = 'SIGNUP';
const ERROR = exports.ERROR = 'ERROR';

// sending received response form fetchSignup to reducer
function handleSignUp(res) {
  return {
    type: SIGNUP,
    payload: res
  };
}

// to handle error
function handleSignupError(err) {
  return {
    type: ERROR,
    message: err
  };
}

// sending post request of signup data i.e. email and password to backend
function fetchSignup(email, password) {
  const res = {
    email,
    password
  };
  const url = `${_variables2.default.url.liveURL}/api/register`;
  return (dispatch, state) => fetch(url, {
    method: 'post',
    headers: {
      Accept: 'application/json , text/plain, */*',
      'Content-type': 'application/json'
    },
    body: JSON.stringify(res)
  }).then(res => res.json()).then(res => {
    if (typeof res === 'object') {
      return dispatch(handleSignUp(res));
    }
    return dispatch(handleSignupError(res));
  }).catch(err => dispatch(handleSignupError(res)));
}