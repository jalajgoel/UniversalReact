{"version":3,"sources":["config/utils/envVars.js"],"names":["string","number","bool","registerEnvFile","DEPLOYMENT","process","env","envFile","envFileResolutionOrder","resolve","get","envFilePath","find","filePath","existsSync","title","level","message","config","path","name","defaultVal","parseInt"],"mappings":";;;;;QAkEgBA,M,GAAAA,M;QAYAC,M,GAAAA,M;QAIAC,I,GAAAA,I;;AA1EhB;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AAEA;;;;AAEA;;AAEA,SAASC,eAAT,GAA2B;AACzB,QAAMC,aAAaC,QAAQC,GAAR,CAAYF,UAA/B;AACA,QAAMG,UAAU,MAAhB;;AAEA;AACA;AACA,QAAMC,yBAAyB,yBAAU;AACvC;AACA;AACA;AACA,iBAAKC,OAAL,CAAa,qBAAWC,GAAX,EAAb,EAA+BH,OAA/B,CAJuC;AAKvC;AACA;AACA;AACA,wBAAOH,UAAP,EAAmB,eAAKK,OAAL,CAAa,qBAAWC,GAAX,EAAb,EAAgC,GAAEH,OAAQ,IAAGH,UAAW,EAAxD,CAAnB,CARuC,CAAV,CAA/B;;AAWA;AACA,QAAMO,cAAcH,uBAAuBI,IAAvB,CAA4BC,YAAY,aAAGC,UAAH,CAAcD,QAAd,CAAxC,CAApB;;AAEA;AACA,MAAIF,WAAJ,EAAiB;AACf;AACA,oBAAI;AACFI,aAAO,QADL;AAEFC,aAAO,SAFL;AAGFC,eAAU,2CAA0CN,WAAY;AAH9D,KAAJ;AAKA,qBAAOO,MAAP,CAAc,EAAEC,MAAMR,WAAR,EAAd;AACD;AACF;;AAED;AACA;AArDA;;;;;;;;AAsDAR;;AAEA;;AAEA;;;;;;;;AAQO,SAASH,MAAT,CAAgBoB,IAAhB,EAAsBC,UAAtB,EAAkC;AACvC,SAAOhB,QAAQC,GAAR,CAAYc,IAAZ,KAAqBC,UAA5B;AACD;;AAED;;;;;;;;AAQO,SAASpB,MAAT,CAAgBmB,IAAhB,EAAsBC,UAAtB,EAAkC;AACvC,SAAOhB,QAAQC,GAAR,CAAYc,IAAZ,IAAoBE,SAASjB,QAAQC,GAAR,CAAYc,IAAZ,CAAT,EAA4B,EAA5B,CAApB,GAAsDC,UAA7D;AACD;;AAEM,SAASnB,IAAT,CAAckB,IAAd,EAAoBC,UAApB,EAAgC;AACrC,SAAOhB,QAAQC,GAAR,CAAYc,IAAZ,IAAoBf,QAAQC,GAAR,CAAYc,IAAZ,MAAsB,MAAtB,IAAgCf,QAAQC,GAAR,CAAYc,IAAZ,MAAsB,GAA1E,GAAgFC,UAAvF;AACD","file":"envVars.js","sourceRoot":"/home/spineor/Documents/risorso /newSetup_frontend/react-universally","sourcesContent":["/**\n * Helper for resolving environment specific configuration files.\n *\n * It resolves .env files that are supported by the `dotenv` library.\n *\n * Please read the application configuration docs for more info.\n */\n\nimport appRootDir from 'app-root-dir';\nimport dotenv from 'dotenv';\nimport fs from 'fs';\nimport path from 'path';\n\nimport ifElse from '../../shared/utils/logic/ifElse';\nimport removeNil from '../../shared/utils/arrays/removeNil';\n\nimport { log } from '../../internal/utils';\n\n// PRIVATES\n\nfunction registerEnvFile() {\n  const DEPLOYMENT = process.env.DEPLOYMENT;\n  const envFile = '.env';\n\n  // This is the order in which we will try to resolve an environment configuration\n  // file.\n  const envFileResolutionOrder = removeNil([\n    // Is there an environment config file at the app root?\n    // This always takes preference.\n    // e.g. /projects/react-universally/.env\n    path.resolve(appRootDir.get(), envFile),\n    // Is there an environment config file at the app root for our target\n    // environment name?\n    // e.g. /projects/react-universally/.env.staging\n    ifElse(DEPLOYMENT)(path.resolve(appRootDir.get(), `${envFile}.${DEPLOYMENT}`)),\n  ]);\n\n  // Find the first env file path match.\n  const envFilePath = envFileResolutionOrder.find(filePath => fs.existsSync(filePath));\n\n  // If we found an env file match the register it.\n  if (envFilePath) {\n    // eslint-disable-next-line no-console\n    log({\n      title: 'server',\n      level: 'special',\n      message: `Registering environment variables from: ${envFilePath}`,\n    });\n    dotenv.config({ path: envFilePath });\n  }\n}\n\n// Ensure that we first register any environment variables from an existing\n// env file.\nregisterEnvFile();\n\n// EXPORTED HELPERS\n\n/**\n * Gets a string environment variable by the given name.\n *\n * @param  {String} name - The name of the environment variable.\n * @param  {String} defaultVal - The default value to use.\n *\n * @return {String} The value.\n */\nexport function string(name, defaultVal) {\n  return process.env[name] || defaultVal;\n}\n\n/**\n * Gets a number environment variable by the given name.\n *\n * @param  {String} name - The name of the environment variable.\n * @param  {number} defaultVal - The default value to use.\n *\n * @return {number} The value.\n */\nexport function number(name, defaultVal) {\n  return process.env[name] ? parseInt(process.env[name], 10) : defaultVal;\n}\n\nexport function bool(name, defaultVal) {\n  return process.env[name] ? process.env[name] === 'true' || process.env[name] === '1' : defaultVal;\n}\n"]}