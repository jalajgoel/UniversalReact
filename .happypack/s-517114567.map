{"version":3,"sources":["shared/components/ContentCard.js"],"names":["ContentCard","props","state","contentArray","pageno","status","getContentCard","likesort","trendingsort","window","addEventListener","handleScroll","bind","d","document","documentElement","offset","Math","ceil","scrollTop","innerHeight","height","offsetHeight","setState","nextProps","console","log","concat","contentdata","viewContentCard","result","length","my","data","contentMapping","map","_id","layout3","layout4","url","liveURL","featuring_image","publishing_channel","published_time","content_title","content_description","channel_logo","quick_category_icon","content_type_icon","trend_graph","comments","likes","mapStateToProps","mapDispatchToProps","dispatch","like","trending"],"mappings":"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","file":"ContentCard.js","sourceRoot":"/home/b-rave/Documents/jalaj/Frontend-Development","sourcesContent":["/*\n  Component of Articles or contentcards.\n  It imports Time Ago plug-in for changing the time zone format into hours and minutes ago.\n  getContentCard is the redux-action to fetch the data of contentcards from backend.\n*/\n/*\n  componentDidMount is used to call the redux-action before rendering and fetch all the data,\n  it consists of \"this.props.getContentCard(this.props.likesort, this.props.trendingsort);\" ,\n  which is used to call the getContentCard() from action and \"(this.props.likesort,\n  this.props.trendingsort)\",are used as arguments to pass in redux action on which the sorting,\n  for likes and trending will be done.\n\n*/\n/*\n  \"componentWillReceiveProps(nextProps)\" Is used to call when the value of props will change,\n  especially for props likesort and trendingsort, if there value will cahange it again goes to,\n  redux action and hit the server URL.\n*/\n/*\n  For layout change that is 3column view or 4 column view we are using props that is layout3 and,\n  layout4. Its values are changing from header then passed to App.js and then in contentcard for ,\n  toggling the classes of the content card.\n*/\nimport React, { Component, PropTypes } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport TimeAgo from 'react-timeago';\nimport { getContentCard } from '../actions/contentcard_action';\nimport variables from '../../variables';\n\nclass ContentCard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contentArray: [],\n      pageno: 1,\n      status: false,\n    };\n  }\n  componentDidMount() {\n    this.props.getContentCard(this.props.likesort, this.props.trendingsort, this.state.pageno);\n    window.addEventListener('scroll', this.handleScroll.bind(this));\n  }\n\n  // for lazy loading--in progress\n  handleScroll() {\n    const d = document.documentElement;\n    const offset = Math.ceil(d.scrollTop + window.innerHeight);\n    const height = d.offsetHeight;\n    if (offset == height) {\n      this.setState({\n        pageno: this.state.pageno + 1,\n        status: true,\n      });\n      this.props.getContentCard(this.props.likesort, this.props.trendingsort, this.state.pageno);\n    }\n  }\n\n  // getting all data on page as component loads\n  componentWillReceiveProps(nextProps) {\n    if (this.props != nextProps) {\n      if (\n        this.props.likesort != nextProps.likesort ||\n        this.props.trendingsort != nextProps.trendingsort\n      ) {\n        this.props.getContentCard(nextProps.likesort, nextProps.trendingsort, this.state.pageno);\n        console.log(nextProps);\n        // this.setState({\n        //   status: false,\n        //   contentArray: this.state.contentArray.concat(nextrops.contentdata.viewContentCard.result),\n        // })\n      }\n    }\n    if (this.state.status) {\n      this.setState({\n        contentArray: this.state.contentArray.concat(nextProps.contentdata.viewContentCard.result),\n      });\n    }\n  }\n\n  render() {\n    if (this.props.contentdata.viewContentCard.result) {\n      if (this.props.contentdata.viewContentCard.result.length > 0) {\n        const my = this;\n        let data = '';\n        if (my.state.contentArray.length > 0) {\n          data = my.state.contentArray;\n        } else {\n          data = this.props.contentdata.viewContentCard.result;\n        }\n        var contentMapping = data.map(data =>\n          (<div\n            key={data._id}\n            className={\n              my.props.layout3 == true && my.props.layout4 == false\n                ? 'col-xs-4 col-sm-4 col-md-4 col-lg-4 no_padding padding_left'\n                : my.props.layout4 == true && my.props.layout3 == false\n                  ? 'col-xs-3 col-sm-3 col-md-3 col-lg-3 no_padding padding_left'\n                  : 'col-xs-4 col-sm-4 col-md-4 col-lg-4 no_padding padding_left'\n            }\n          >\n            <div className=\"panel content-card\">\n              <img\n                className=\"img-responsive card-image\"\n                src={variables.url.liveURL + data.featuring_image}\n                alt=\"content card img\"\n              />\n              <div className=\"panel-body\">\n                <div\n                  className={\n                    my.props.layout3 == true && my.props.layout4 == false\n                      ? 'content-card-section1'\n                      : my.props.layout4 == true && my.props.layout3 == false\n                        ? 'content-card4-section1'\n                        : 'content-card-section1'\n                  }\n                >\n                  <div className=\"content-card-title\">\n                    <p>\n                      {data.publishing_channel},{' '}\n                      <span className=\"text-muted\">\n                        <TimeAgo date={data.published_time} />\n                      </span>\n                    </p>\n                  </div>\n                  <div className=\"content-card-info\">\n                    <a>\n                      <h3>\n                        {data.content_title}\n                      </h3>\n                    </a>\n                    <p className=\"text-muted\">\n                      {data.content_description}\n                    </p>\n                  </div>\n                </div>\n                <div\n                  className={\n                    my.props.layout3 == true && my.props.layout4 == false\n                      ? 'content-card-section2'\n                      : my.props.layout4 == true && my.props.layout3 == false\n                        ? 'content-card4-section2'\n                        : 'content-card-section2'\n                  }\n                >\n                  <ul>\n                    <li>\n                      <img\n                        src={variables.url.liveURL + data.channel_logo}\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Channel Logo\"\n                      />\n                    </li>\n                    <li>\n                      <img src=\"assets/images/content-card/banner-icon-divider.png\" />\n                    </li>\n                    <li>\n                      <img\n                        src={variables.url.liveURL + data.quick_category_icon}\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Quick Category\"\n                      />\n                    </li>\n                    <li>\n                      <img src=\"assets/images/content-card/banner-icon-divider.png\" />\n                    </li>\n                    <li>\n                      <img\n                        src={variables.url.liveURL + data.content_type_icon}\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Content Type\"\n                      />\n                    </li>\n                  </ul>\n                </div>\n                <div\n                  className={\n                    my.props.layout3 == true && my.props.layout4 == false\n                      ? 'content-card-footer'\n                      : my.props.layout4 == true && my.props.layout3 == false\n                        ? 'content-card4-footer'\n                        : 'content-card-footer'\n                  }\n                >\n                  <ul>\n                    <li>\n                      <i\n                        className=\"ico-icon42 footer-icons\"\n                        aria-hidden=\"true\"\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Trending\"\n                      />\n                      <span className=\"text-muted\">\n                        {data.trend_graph}\n                      </span>\n                    </li>\n\n                    <li>\n                      <i\n                        className=\"ico-icon44 footer-icons text-muted\"\n                        aria-hidden=\"true\"\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Comments\"\n                      />\n                      <span className=\"text-muted\">\n                        {data.comments}\n                      </span>\n                    </li>\n\n                    <li>\n                      <i\n                        className=\"ico-icon43 footer-icons text-muted\"\n                        aria-hidden=\"true\"\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Likes\"\n                      />\n                      <span className=\"text-muted\">\n                        {data.likes}\n                      </span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>),\n        );\n      }\n    }\n\n    return (\n      <div>\n        {contentMapping}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const contentdata = state;\n  return { contentdata };\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return {\n    getContentCard: (like, trending, pageno) => {\n      dispatch(getContentCard(like, trending, pageno));\n    },\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContentCard);\n"]}