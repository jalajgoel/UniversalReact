{"version":3,"sources":["shared/components/ContentCard.js"],"names":["ContentCard","constructor","props","state","contentArray","pageno","status","componentDidMount","getContentCard","likesort","trendingsort","window","addEventListener","handleScroll","bind","d","document","documentElement","offset","Math","ceil","scrollTop","innerHeight","height","offsetHeight","setState","componentWillReceiveProps","nextProps","console","log","concat","contentdata","viewContentCard","result","render","length","my","data","contentMapping","map","_id","layout3","layout4","url","liveURL","featuring_image","publishing_channel","published_time","content_title","content_description","channel_logo","quick_category_icon","content_type_icon","trend_graph","comments","likes","mapStateToProps","mapDispatchToProps","dispatch","like","trending"],"mappings":"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","file":"ContentCard.js","sourceRoot":"/home/b-rave/Documents/jalaj/Frontend-Development","sourcesContent":["/*\n  Component of Articles or contentcards.\n  It imports Time Ago plug-in for changing the time zone format into hours and minutes ago.\n  getContentCard is the redux-action to fetch the data of contentcards from backend.\n*/\n/*\n  componentDidMount is used to call the redux-action before rendering and fetch all the data,\n  it consists of \"this.props.getContentCard(this.props.likesort, this.props.trendingsort);\" ,\n  which is used to call the getContentCard() from action and \"(this.props.likesort,\n  this.props.trendingsort)\",are used as arguments to pass in redux action on which the sorting,\n  for likes and trending will be done.\n\n*/\n/*\n  \"componentWillReceiveProps(nextProps)\" Is used to call when the value of props will change,\n  especially for props likesort and trendingsort, if there value will cahange it again goes to,\n  redux action and hit the server URL.\n*/\n/*\n  For layout change that is 3column view or 4 column view we are using props that is layout3 and,\n  layout4. Its values are changing from header then passed to App.js and then in contentcard for ,\n  toggling the classes of the content card.\n*/\nimport React, { Component, PropTypes } from 'react';\nimport { connect } from 'react-redux';\nimport Helmet from 'react-helmet';\nimport TimeAgo from 'react-timeago';\nimport { getContentCard } from '../actions/contentcard_action';\nimport variables from '../../variables';\n\nclass ContentCard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      contentArray: [],\n      pageno: 1,\n      status: false,\n    };\n  }\n  componentDidMount() {\n    this.props.getContentCard(this.props.likesort, this.props.trendingsort, this.state.pageno);\n    window.addEventListener('scroll', this.handleScroll.bind(this));\n  }\n\n  // for lazy loading--in progress\n  handleScroll() {\n    const d = document.documentElement;\n    const offset = Math.ceil(d.scrollTop + window.innerHeight);\n    const height = d.offsetHeight;\n    if (offset == height) {\n      this.setState({\n        pageno: this.state.pageno + 1,\n        status: true,\n      });\n      this.props.getContentCard(this.props.likesort, this.props.trendingsort, this.state.pageno);\n    }\n  }\n\n  // getting all data on page as component loads\n  componentWillReceiveProps(nextProps) {\n    if (this.props != nextProps) {\n      if (\n        this.props.likesort != nextProps.likesort ||\n        this.props.trendingsort != nextProps.trendingsort\n      ) {\n        this.props.getContentCard(nextProps.likesort, nextProps.trendingsort, this.state.pageno);\n        console.log(nextProps);\n        // this.setState({\n        //   status: false,\n        //   contentArray: this.state.contentArray.concat(nextrops.contentdata.viewContentCard.result),\n        // })\n      }\n    }\n    if (this.state.status) {\n      this.setState({\n        contentArray: this.state.contentArray.concat(nextProps.contentdata.viewContentCard.result),\n      });\n    }\n  }\n\n  render() {\n    if (this.props.contentdata.viewContentCard.result) {\n      if (this.props.contentdata.viewContentCard.result.length > 0) {\n        const my = this;\n        let data = '';\n        if (my.state.contentArray.length > 0) {\n          data = my.state.contentArray;\n        } else {\n          data = this.props.contentdata.viewContentCard.result;\n        }\n        var contentMapping = data.map(data =>\n          (<div\n            key={data._id}\n            className={\n              my.props.layout3 == true && my.props.layout4 == false\n                ? 'col-xs-4 col-sm-4 col-md-4 col-lg-4 no_padding padding_left'\n                : my.props.layout4 == true && my.props.layout3 == false\n                  ? 'col-xs-3 col-sm-3 col-md-3 col-lg-3 no_padding padding_left'\n                  : 'col-xs-4 col-sm-4 col-md-4 col-lg-4 no_padding padding_left'\n            }\n          >\n            <div className=\"panel content-card\">\n              <img\n                className=\"img-responsive card-image\"\n                src={variables.url.liveURL + data.featuring_image}\n                alt=\"content card img\"\n              />\n              <div className=\"panel-body\">\n                <div\n                  className={\n                    my.props.layout3 == true && my.props.layout4 == false\n                      ? 'content-card-section1'\n                      : my.props.layout4 == true && my.props.layout3 == false\n                        ? 'content-card4-section1'\n                        : 'content-card-section1'\n                  }\n                >\n                  <div className=\"content-card-title\">\n                    <p>\n                      {data.publishing_channel},{' '}\n                      <span className=\"text-muted\">\n                        <TimeAgo date={data.published_time} />\n                      </span>\n                    </p>\n                  </div>\n                  <div className=\"content-card-info\">\n                    <a>\n                      <h3>\n                        {data.content_title}\n                      </h3>\n                    </a>\n                    <p className=\"text-muted\">\n                      {data.content_description}\n                    </p>\n                  </div>\n                </div>\n                <div\n                  className={\n                    my.props.layout3 == true && my.props.layout4 == false\n                      ? 'content-card-section2'\n                      : my.props.layout4 == true && my.props.layout3 == false\n                        ? 'content-card4-section2'\n                        : 'content-card-section2'\n                  }\n                >\n                  <ul>\n                    <li>\n                      <img\n                        src={variables.url.liveURL + data.channel_logo}\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Channel Logo\"\n                      />\n                    </li>\n                    <li>\n                      <img src=\"assets/images/content-card/banner-icon-divider.png\" />\n                    </li>\n                    <li>\n                      <img\n                        src={variables.url.liveURL + data.quick_category_icon}\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Quick Category\"\n                      />\n                    </li>\n                    <li>\n                      <img src=\"assets/images/content-card/banner-icon-divider.png\" />\n                    </li>\n                    <li>\n                      <img\n                        src={variables.url.liveURL + data.content_type_icon}\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Content Type\"\n                      />\n                    </li>\n                  </ul>\n                </div>\n                <div\n                  className={\n                    my.props.layout3 == true && my.props.layout4 == false\n                      ? 'content-card-footer'\n                      : my.props.layout4 == true && my.props.layout3 == false\n                        ? 'content-card4-footer'\n                        : 'content-card-footer'\n                  }\n                >\n                  <ul>\n                    <li>\n                      <i\n                        className=\"ico-icon42 footer-icons\"\n                        aria-hidden=\"true\"\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Trending\"\n                      />\n                      <span className=\"text-muted\">\n                        {data.trend_graph}\n                      </span>\n                    </li>\n\n                    <li>\n                      <i\n                        className=\"ico-icon44 footer-icons text-muted\"\n                        aria-hidden=\"true\"\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Comments\"\n                      />\n                      <span className=\"text-muted\">\n                        {data.comments}\n                      </span>\n                    </li>\n\n                    <li>\n                      <i\n                        className=\"ico-icon43 footer-icons text-muted\"\n                        aria-hidden=\"true\"\n                        data-toggle=\"tooltip\"\n                        data-placement=\"top\"\n                        title=\"Likes\"\n                      />\n                      <span className=\"text-muted\">\n                        {data.likes}\n                      </span>\n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>),\n        );\n      }\n    }\n\n    return (\n      <div>\n        {contentMapping}\n      </div>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  const contentdata = state;\n  return { contentdata };\n}\n\nfunction mapDispatchToProps(dispatch, props) {\n  return {\n    getContentCard: (like, trending, pageno) => {\n      dispatch(getContentCard(like, trending, pageno));\n    },\n  };\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContentCard);\n"]}