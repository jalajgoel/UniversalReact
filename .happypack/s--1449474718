'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
var _jsxFileName = '/home/b-rave/Documents/jalaj/Frontend-Development/shared/components/QuickCategories.js';

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _reactRedux = require('react-redux');

var _reactHelmet = require('react-helmet');

var _reactHelmet2 = _interopRequireDefault(_reactHelmet);

var _YourCollection = require('./YourCollection');

var _YourCollection2 = _interopRequireDefault(_YourCollection);

var _quickCategories_action = require('../actions/quickCategories_action');

var _contentcard_action = require('../actions/contentcard_action');

var _TrendingTopics = require('./TrendingTopics');

var _variables = require('../../variables');

var _variables2 = _interopRequireDefault(_variables);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

class QuickCategories extends _react.Component {
  constructor(props) {
    super(props);
    this.state = {
      // to activate css of icon on click iff category has data to show
      isActive: '',

      // to render YourCollection component--by default quick categories will render
      showYourCollection: false
    };
    this.changeClassHandle = this.changeClassHandle.bind(this);
  }

  componentDidMount() {
    this.props.getCategories();
  }

  // receiving data from redux store to display clicked icon
  cataegoryFilter(category) {
    this.props.getCategoryFilter(category);
  }

  // changes color of clicked icon
  changeClassHandle(data) {
    this.setState({ isActive: data });
  }

  // handler for toggleSidebar event
  toggleSidebar() {
    this.setState({ showYourCollection: !this.state.showYourCollection });
  }

  // quick categories default data
  quickCategories() {
    if (this.props.categories.viewquickCategories_Data.result) {
      if (this.props.categories.viewquickCategories_Data.result.length > 0) {
        const my = this;
        var CategoriesMaping = this.props.categories.viewquickCategories_Data.result.map(data => _react2.default.createElement(
          'div',
          {
            key: data._id,
            className: my.state.isActive == data ? 'quick_categories_item border_right hover' : 'quick_categories_item border_right',
            onClick: () => {
              my.cataegoryFilter(data.title);
            },
            __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 48
            }
          },
          _react2.default.createElement(
            'span',
            {
              onClick: () => {
                my.changeClassHandle(data);
              },
              __self: this,
              __source: {
                fileName: _jsxFileName,
                lineNumber: 59
              }
            },
            _react2.default.createElement(
              'div',
              { className: 'img', 'data-toggle': 'tooltip', 'data-placement': 'top', title: data.title, __self: this,
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 64
                }
              },
              _react2.default.createElement('img', { src: _variables2.default.url.liveURL + data.category_icon, __self: this,
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 65
                }
              })
            ),
            _react2.default.createElement(
              'p',
              { className: 'text-muted category_title', __self: this,
                __source: {
                  fileName: _jsxFileName,
                  lineNumber: 67
                }
              },
              data.title
            )
          )
        ));
      }
    }

    return _react2.default.createElement(
      'div',
      { className: 'sidebar1', __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 77
        }
      },
      _react2.default.createElement(
        'div',
        { className: 'row no_margin quick-heading', __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 78
          }
        },
        _react2.default.createElement(
          'div',
          { className: 'col-sm-8 no_padding padding_left', __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 79
            }
          },
          _react2.default.createElement(
            'p',
            { className: 'text no_padding', __self: this,
              __source: {
                fileName: _jsxFileName,
                lineNumber: 80
              }
            },
            'Quick Categories'
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'col-sm-4 quick-icon', __self: this,
            __source: {
              fileName: _jsxFileName,
              lineNumber: 82
            }
          },
          _react2.default.createElement(
            'div',
            { className: 'reset', 'data-toggle': 'tooltip', 'data-placement': 'top', title: 'Turn Button', __self: this,
              __source: {
                fileName: _jsxFileName,
                lineNumber: 83
              }
            },
            _react2.default.createElement('img', {
              src: '../assets/images/sidebar_icons/reset.png',
              onClick: this.toggleSidebar.bind(this),
              __self: this,
              __source: {
                fileName: _jsxFileName,
                lineNumber: 84
              }
            })
          )
        )
      ),
      _react2.default.createElement(
        'div',
        { className: 'row1', __self: this,
          __source: {
            fileName: _jsxFileName,
            lineNumber: 91
          }
        },
        CategoriesMaping
      )
    );
  }

  // YourCollection sidebar data
  urCollection() {
    return _react2.default.createElement(_YourCollection2.default, { toggleMe: this.toggleSidebar.bind(this), __self: this,
      __source: {
        fileName: _jsxFileName,
        lineNumber: 100
      }
    });
  }

  render() {
    let sidebar1;
    if (this.state.showYourCollection) {
      sidebar1 = this.urCollection();
    } else {
      sidebar1 = this.quickCategories();
    }

    return _react2.default.createElement(
      'div',
      {
        __self: this,
        __source: {
          fileName: _jsxFileName,
          lineNumber: 112
        }
      },
      sidebar1
    );
  }
}
function mapStateToProps(state) {
  const categories = state;
  return { categories };
}

function mapDispatchToProps(dispatch) {
  return {
    getCategories: () => {
      dispatch((0, _quickCategories_action.getQuickCategories_Data)());
    },
    getCategoryFilter: filter => {
      dispatch((0, _contentcard_action.getCategoryFilter_Data)(filter));
    }
  };
}

exports.default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(QuickCategories);